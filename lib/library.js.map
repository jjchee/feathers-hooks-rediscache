{"version":3,"sources":["webpack://library/webpack/universalModuleDefinition","webpack://library/webpack/bootstrap","webpack://library/./src/hooks/cache.js","webpack://library/./src/hooks/helpers/path.js","webpack://library/./src/hooks/redis.js","webpack://library/./src/index.js","webpack://library/./src/redisClient.js","webpack://library/./src/routes/cache.js","webpack://library/./src/routes/helpers/redis.js","webpack://library/external \"chalk\"","webpack://library/external \"express\"","webpack://library/external \"moment\"","webpack://library/external \"qs\"","webpack://library/external \"redis\""],"names":["defaults","defaultDuration","cache","options","hook","cacheOptions","app","get","Object","assign","result","hasOwnProperty","Array","isArray","array","wrapped","cached","duration","Promise","resolve","removeCacheInformation","_qs","_interopRequireDefault","require","obj","__esModule","default","parseNestedPath","path","params","re","RegExp","match","exec","keys","route","includes","replace","parsePath","config","removePathFromCacheKey","parseNestedRoutes","q","query","remove","id","length","qs","stringify","encode","_moment","_chalk","_path","env","immediateCacheKey","before","client","err","reply","data","JSON","parse","moment","expiresOn","format","console","log","chalk","cyan","green","cacheKey","after","add","parent","group","key","set","expire","humanize","_cache","_redisClient","_cache2","_redis","_default","exports","redisClient","cacheRoutes","hookCache","hookRemoveCacheInformation","redisBeforeHook","redisAfterHook","module","retryInterval","redisOptions","retry_strategy","undefined","yellow","redis","createClient","on","_express","HTTP_OK","HTTP_NO_CONTENT","HTTP_SERVER_ERROR","HTTP_NOT_FOUND","routes","router","express","Router","h","RedisCache","req","res","flushall","status","json","message","target","decodeURIComponent","hasQueryString","url","split","slice","join","clearSingle","then","r","end","lrange","clearGroup","constructor","reject","del","clearAll","e","i"],"mappings":"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","file":"library.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"library\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"library\"] = factory();\n\telse\n\t\troot[\"library\"] = factory();\n})(global, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","/**\n * After hook - generates a cache object that is needed\n * for the redis hook and the express middelware.\n */\nconst defaults = {\n  defaultDuration: 3600 * 24\n};\n\nexport function cache(options) { // eslint-disable-line no-unused-vars\n  return function (hook) {\n    const cacheOptions = hook.app.get('redisCache');\n\n    options = Object.assign({}, defaults, cacheOptions, options);\n\n    if (!hook.result.hasOwnProperty('cache')) {\n      let cache = {};\n\n      if (Array.isArray(hook.result)) {\n        const array = hook.result;\n\n        cache.wrapped = array;\n        hook.result = {};\n      }\n\n      cache = Object.assign({}, cache, {\n        cached: false,\n        duration: options.duration || options.defaultDuration\n      });\n\n      hook.result.cache = cache;\n    }\n    return Promise.resolve(hook);\n  };\n};\n\nexport function removeCacheInformation(options) { // eslint-disable-line no-unused-vars\n  return function (hook) {\n    if (hook.result.hasOwnProperty('cache')) {\n      delete hook.result.cache;\n    }\n    return Promise.resolve(hook);\n  };\n};\n","import qs from 'qs';\n\nfunction parseNestedPath(path, params) {\n  const re = new RegExp(':([^\\\\/\\\\?]+)\\\\??', 'g');\n  let match = null;\n\n  while ((match = re.exec(path)) !== null) {\n    if (Object.keys(params.route).includes(match[1])) {\n      path = path.replace(match[0], params.route[match[1]]);\n    }\n  }\n\n  return path;\n}\n\nfunction parsePath(hook, config = {removePathFromCacheKey: false, parseNestedRoutes: false}) {\n  const q = hook.params.query || {};\n  const remove = config.removePathFromCacheKey;\n  const parseNestedRoutes = config.parseNestedRoutes;\n  let path = remove && hook.id ? '' : `${hook.path}`;\n\n  if (!remove && parseNestedRoutes) {\n    path = parseNestedPath(path, hook.params);\n  }\n\n  if (hook.id) {\n    if (path.length !== 0 && !remove) {\n      path += '/';\n    }\n    if (Object.keys(q).length > 0) {\n      path += `${hook.id}?${qs.stringify(q, { encode: false })}`;\n    } else {\n      path += `${hook.id}`;\n    }\n  } else {\n    if (Object.keys(q).length > 0) {\n      path += `?${qs.stringify(q, { encode: false })}`;\n    }\n  }\n\n  return path;\n}\n\nexport { parsePath };\n","import moment from 'moment';\nimport chalk from 'chalk';\nimport { parsePath } from './helpers/path';\n\nconst defaults = {\n  env: 'production',\n  defaultDuration: 3600 * 24,\n  immediateCacheKey: false\n};\n\nexport function before(options) { // eslint-disable-line no-unused-vars\n  return function (hook) {\n    const cacheOptions = hook.app.get('redisCache');\n\n    options = Object.assign({}, defaults, cacheOptions, options);\n\n    return new Promise(resolve => {\n      const client = hook.app.get('redisClient');\n\n      if (!client) {\n        resolve(hook);\n      }\n\n      const path = parsePath(hook, options);\n\n      client.get(path, (err, reply) => {\n        if (err !== null) resolve(hook);\n        if (reply) {\n          let data = JSON.parse(reply);\n          const duration = moment(data.cache.expiresOn).format('DD MMMM YYYY - HH:mm:ss');\n\n          hook.result = data;\n          resolve(hook);\n\n          /* istanbul ignore next */\n          if (options.env !== 'test') {\n            console.log(`${chalk.cyan('[redis]')} returning cached value for ${chalk.green(path)}.`);\n            console.log(`> Expires on ${duration}.`);\n          }\n        } else {\n          if (options.immediateCacheKey === true) {\n            hook.params.cacheKey = path;\n          }\n          resolve(hook);\n        }\n      });\n    });\n  };\n};\n\nexport function after(options) { // eslint-disable-line no-unused-vars\n  return function (hook) {\n    const cacheOptions = hook.app.get('redisCache');\n\n    options = Object.assign({}, defaults, cacheOptions, options);\n\n    return new Promise(resolve => {\n      if (!hook.result.cache.cached) {\n        const duration = hook.result.cache.duration || options.defaultDuration;\n        const client = hook.app.get('redisClient');\n\n        if (!client) {\n          resolve(hook);\n        }\n\n        const path = hook.params.cacheKey || parsePath(hook, options);\n\n        // adding a cache object\n        Object.assign(hook.result.cache, {\n          cached: true,\n          duration: duration,\n          expiresOn: moment().add(moment.duration(duration, 'seconds')),\n          parent: hook.path,\n          group: hook.path ? `group-${hook.path}` : '',\n          key: path\n        });\n\n        client.set(path, JSON.stringify(hook.result));\n        client.expire(path, hook.result.cache.duration);\n\n        /* istanbul ignore next */\n        if (options.env !== 'test') {\n          console.log(`${chalk.cyan('[redis]')} added ${chalk.green(path)} to the cache.`);\n          console.log(`> Expires in ${moment.duration(duration, 'seconds').humanize()}.`);\n        }\n      }\n\n      if (hook.result.cache.hasOwnProperty('wrapped')) {\n        const { wrapped } = hook.result.cache;\n\n        hook.result = wrapped;\n      }\n\n      resolve(hook);\n    });\n  };\n};\n\n","import cacheRoutes from './routes/cache';\nimport redisClient from './redisClient';\nimport { cache as hookCache } from './hooks/cache';\nimport { removeCacheInformation as hookRemoveCacheInformation } from './hooks/cache';\nimport { before as redisBeforeHook} from './hooks/redis';\nimport { after as redisAfterHook} from './hooks/redis';\n\nexport default {\n  redisClient,\n  cacheRoutes,\n  hookCache,\n  hookRemoveCacheInformation,\n  redisBeforeHook,\n  redisAfterHook\n};\n","import redis from 'redis';\nimport chalk from 'chalk';\n\nexport default function redisClient() { // eslint-disable-line no-unused-vars\n  const app = this;\n  const cacheOptions = app.get('redisCache') || {};\n  const retryInterval = cacheOptions.retryInterval || 10000;\n  const redisOptions = Object.assign({}, this.get('redis'), {\n    retry_strategy: function (options) { // eslint-disable-line camelcase\n      app.set('redisClient', undefined);\n      /* istanbul ignore next */\n      if (cacheOptions.env !== 'test') {\n        console.log(`${chalk.yellow('[redis]')} not connected`);\n      }\n      return retryInterval;\n    }\n  });\n  const client = redis.createClient(redisOptions);\n\n  app.set('redisClient', client);\n\n  client.on('ready', () => {\n    app.set('redisClient', client);\n    /* istanbul ignore next */\n    if (cacheOptions.env !== 'test') {\n      console.log(`${chalk.green('[redis]')} connected`);\n    }\n  });\n  return this;\n}\n","import express from 'express';\n\nimport RedisCache from './helpers/redis';\n\nconst HTTP_OK = 200;\nconst HTTP_NO_CONTENT = 204;\nconst HTTP_SERVER_ERROR = 500;\nconst HTTP_NOT_FOUND = 404;\n\nfunction routes(app) {\n  const router = express.Router();\n  const client = app.get('redisClient');\n  const h = new RedisCache(client);\n\n  router.get('/clear', (req, res) => {\n    client.flushall('ASYNC', () => {\n      res.status(HTTP_OK).json({\n        message: 'Cache cleared',\n        status: HTTP_OK\n      });\n    });\n  }); // clear a unique route\n\n  // clear a unique route\n  router.get('/clear/single/*', (req, res) => {\n    let target = decodeURIComponent(req.params[0]);\n    // Formated options following ?\n    const query = req.query;\n    const hasQueryString = (query && (Object.keys(query).length !== 0));\n\n    // Target should always be defined as Express router raises 404\n    // as route is not handled\n    if (target.length) {\n      if (hasQueryString) {\n      // Keep queries in a single string with the taget\n        target = decodeURIComponent(req.url.split('/').slice(3).join('/'));\n      }\n\n      // Gets the value of a key in the redis client\n      client.get(`${target}`, (err, reply) => {\n        if (err) {\n          res.status(HTTP_SERVER_ERROR).json({\n            message: 'something went wrong' + err.message\n          });\n        } else {\n          // If the key existed\n          if (reply) {\n            // Clear existing cached key\n            h.clearSingle(target).then(r => {\n              res.status(HTTP_OK).json({\n                message: `cache cleared for key (${hasQueryString ?\n                  'with' : 'without'} params): ${target}`,\n                status: HTTP_OK\n              });\n            });\n          } else {\n            /**\n             * Empty reply means the key does not exist.\n             * Must use HTTP_OK with express as HTTP's RFC stats 204 should not\n             * provide a body, message would then be lost.\n             */\n            res.status(HTTP_OK).json({\n              message: `cache already cleared for key (${hasQueryString ?\n                'with' : 'without'} params): ${target}`,\n              status: HTTP_NO_CONTENT\n            });\n          }\n\n        }\n      });\n    } else {\n      res.status(HTTP_NOT_FOUND).end();\n    }\n  });\n\n  // clear a group\n  router.get('/clear/group/*', (req, res) => {\n    let target = decodeURIComponent(req.params[0]);\n\n    // Target should always be defined as Express router raises 404\n    // as route is not handled\n    if (target.length) {\n      target = 'group-' + target;\n      // Returns elements of the list associated to the target/key 0 being the\n      // first and -1 specifying get all till the latest\n      client.lrange(target, 0, -1, (err, reply) => {\n        if (err) {\n          res.status(HTTP_SERVER_ERROR).json({\n            message: 'something went wrong' + err.message\n          });\n        } else {\n          // If the list/group existed and contains something\n          if (reply && Array.isArray(reply) && (reply.length > 0)) {\n            // Clear existing cached group key\n            h.clearGroup(target).then(r => {\n              res.status(HTTP_OK).json({\n                message:\n                  `cache cleared for the group key: ${decodeURIComponent(req.params[0])}`,\n                status: HTTP_OK\n              });\n            });\n          } else {\n            /**\n             * Empty reply means the key does not exist.\n             * Must use HTTP_OK with express as HTTP's RFC stats 204 should not\n             * provide a body, message would then be lost.\n             */\n            res.status(HTTP_OK).json({\n              message:\n                `cache already cleared for the group key: ${decodeURIComponent(req.params[0])}`,\n              status: HTTP_NO_CONTENT\n            });\n          }\n        }\n      });\n    } else {\n      res.status(HTTP_NOT_FOUND).end();\n    }\n  });\n\n  // add route to display cache index\n  // this has been removed for performance issues\n  // router.get('/index', (req, res) => {\n  //   let results = new Set();\n\n  //   h.scanAsync('0', '*', results)\n  //     .then(data => {\n  //       res.status(200).json(data);\n  //     })\n  //     .catch(err => {\n  //       res.status(404).json(err);\n  //     });\n\n  // });\n\n  return router;\n}\n\nexport default routes;\n","export default class RedisCache {\n  constructor(client) {\n    this.client = client;\n  }\n\n  /**\n   * scan the redis index\n   */\n  // scan() {\n  //   // starts at 0 if cursor is again 0 it means the iteration is finished\n  //   let cursor = '0';\n\n  //   return new Promise((resolve, reject) => {\n  //     this.client.scan(cursor, 'MATCH', '*', 'COUNT', '100', (err, reply) => {\n  //       if (err) {\n  //         reject(err);\n  //       }\n\n  //       cursor = reply[0];\n  //       if (cursor === '0') {\n  //         resolve(reply[1]);\n  //       } else {\n  //         // do your processing\n  //         // reply[1] is an array of matched keys.\n  //         // console.log(reply[1]);\n  //         return this.scan();\n  //       }\n  //       return false;\n  //     });\n\n  //   });\n  // }\n\n  /**\n   * Async scan of the redis index\n   * Do not for get to passin a Set\n   * myResults = new Set();\n   *\n   * scanAsync('0', \"NOC-*[^listen]*\", myResults).map(\n   *   myResults => { console.log( myResults); }\n   * );\n   *\n   * @param {String} cursor - string '0'\n   * @param {String} patern - string '0'\n   * @param {Set} returnSet - pass a set to have unique keys\n   */\n  // scanAsync(cursor, pattern, returnSet) {\n  //   // starts at 0 if cursor is again 0 it means the iteration is finished\n\n  //   return new Promise((resolve, reject) => {\n  //     this.client.scan(cursor, 'MATCH', pattern, 'COUNT', '100', (err, reply) => {\n\n  //       if (err) {\n  //         reject(err);\n  //       }\n\n  //       cursor = reply[0];\n  //       const keys = reply[1];\n\n  //       keys.forEach((key, i) => {\n  //         returnSet.add(key);\n  //       });\n\n  //       if (cursor === '0') {\n  //         resolve(Array.from(returnSet));\n  //       }\n\n  //       return this.scanAsync(cursor, pattern, returnSet);\n  //     });\n  //   });\n  // }\n\n  /**\n   * Clean single item from the cache\n   * @param {string} key - the key to find in redis\n   */\n  clearSingle(key) {\n    return new Promise((resolve, reject) => {\n      this.client.del(`${key}`, (err, reply) => {\n        if (err) reject(false);\n        if (reply === 1) {\n          resolve(true);\n        }\n        resolve(false);\n      });\n    });\n  }\n\n  /**\n   * Clear a group\n   * @param {string} key - key of the group to clean\n   */\n  clearGroup(key) {\n    return new Promise((resolve, reject) => {\n      this.client.lrange(key, 0, -1, (err, reply) => {\n        if (err) {\n          reject(err);\n        }\n        this.clearAll(reply).then(\n          this.client.del(key, (e, r) => {\n            resolve(r === 1);\n          })\n        );\n      });\n    });\n  }\n\n  /**\n   * Clear all keys of a redis list\n   * @param {Object[]} array\n   */\n  clearAll(array) {\n    return new Promise(resolve => {\n      if (!array.length) resolve(false);\n      let i = 0;\n\n      for (i; i < array.length; i++) {\n        this.clearSingle(array[i]).then(r => {\n          if (i === array.length - 1) {\n            resolve(r);\n          }\n        });\n      }\n    });\n  }\n};\n","module.exports = require(\"chalk\");","module.exports = require(\"express\");","module.exports = require(\"moment\");","module.exports = require(\"qs\");","module.exports = require(\"redis\");"],"sourceRoot":""}